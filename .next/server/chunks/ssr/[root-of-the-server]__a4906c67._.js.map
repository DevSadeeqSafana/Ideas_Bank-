{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 29, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/ideas_bank/src/hooks/useUserInfo.js"],"sourcesContent":["\"use client\";\n\nimport { useMutation, useQuery, useQueryClient } from '@tanstack/react-query';\nimport { useCallback } from 'react';\n\nconst USER_INFO_KEY = 'userInfo';\n\n// Helper function to get initial data from localStorage\nconst getInitialUserData = () => {\n  if (typeof window === 'undefined') return null;\n  \n  try {\n    const data = localStorage.getItem('data');\n    const traineeId = localStorage.getItem('traineeId');\n    \n    if (data) {\n      const parsed = JSON.parse(data);\n      return {\n        ...parsed,\n        traineeId: traineeId || parsed.ID || parsed.id || parsed.SN || parsed.sn\n      };\n    }\n  } catch (error) {\n    console.error('Error reading from localStorage:', error);\n  }\n  \n  return null;\n};\n\n// Helper function to sync with localStorage\nconst syncWithLocalStorage = (data) => {\n  if (typeof window === 'undefined') return;\n  \n  try {\n    if (data) {\n      localStorage.setItem('data', JSON.stringify(data));\n      if (data.traineeId) {\n        localStorage.setItem('traineeId', String(data.traineeId));\n      }\n    } else {\n      localStorage.removeItem('data');\n      localStorage.removeItem('traineeId');\n    }\n  } catch (error) {\n    console.error('Error syncing with localStorage:', error);\n  }\n};\n\nexport const useUserInfo = () => {\n  const queryClient = useQueryClient();\n\n  // Query to get user info\n  const query = useQuery({\n    queryKey: [USER_INFO_KEY],\n    queryFn: () => getInitialUserData(),\n    staleTime: Infinity, // Never stale unless manually invalidated\n    gcTime: 1000 * 60 * 60 * 24, // 24 hours (renamed from cacheTime)\n  });\n\n  // Mutation to update user info\n  const updateMutation = useMutation({\n    mutationFn: (newData) => {\n      const currentData = queryClient.getQueryData([USER_INFO_KEY]) || {};\n      const updatedData = { ...currentData, ...newData };\n      syncWithLocalStorage(updatedData);\n      return updatedData;\n    },\n    onSuccess: (updatedData) => {\n      queryClient.setQueryData([USER_INFO_KEY], updatedData);\n    },\n  });\n\n  // Mutation to clear user info\n  const clearMutation = useMutation({\n    mutationFn: () => {\n      syncWithLocalStorage(null);\n      return null;\n    },\n    onSuccess: () => {\n      queryClient.setQueryData([USER_INFO_KEY], null);\n    },\n  });\n\n  return {\n    // Data\n    userInfo: query.data,\n    isLoading: query.isLoading,\n    error: query.error,\n    \n    // Actions\n    updateUserInfo: (data) => updateMutation.mutate(data),\n    clearUserInfo: () => clearMutation.mutate(),\n    \n    // Mutation states\n    isUpdating: updateMutation.isPending,\n    updateError: updateMutation.error,\n    \n    // Utilities\n    getTraineeId: useCallback(() => {\n      const data = query.data;\n      return data?.traineeId || data?.ID || data?.id || data?.SN || data?.sn;\n    }, [query.data]),\n    \n    // Refresh from localStorage (useful if data was updated externally)\n    refresh: useCallback(() => queryClient.invalidateQueries({ queryKey: [USER_INFO_KEY] }), [queryClient]),\n    \n    // Check if user has any data stored\n    hasUserData: useCallback(() => !!query.data, [query.data]),\n  };\n};\n\n// Hook for specific form data management\nexport const useFormData = (formType) => {\n  const { userInfo, updateUserInfo, isUpdating } = useUserInfo();\n  \n  const getFormData = () => {\n    if (!userInfo) return {};\n    \n    switch (formType) {\n      case 'personal':\n        return {\n          fullname: userInfo.fullname || '',\n          registrationno: userInfo.registrationno || '',\n          email: userInfo.email || '',\n          phone: userInfo.phone || '',\n          gender: userInfo.gender || '',\n          ID: userInfo.ID || userInfo.id || '',\n        };\n      \n      case 'bank':\n        return {\n          bank_name: userInfo.bank_name || '',\n          account_number: userInfo.account_number || '',\n          account_name: userInfo.account_name || '',\n          bvn: userInfo.bvn || '',\n          trainee_id: userInfo.traineeId || userInfo.ID || userInfo.id || '',\n        };\n      \n      case 'internship':\n        return {\n          has_started_internship: userInfo.has_started_internship || false,\n          internship_letter_url: userInfo.internship_letter_url || '',\n          has_completed_internship: userInfo.has_completed_internship || false,\n          completion_letter_url: userInfo.completion_letter_url || '',\n          state_of_internship: userInfo.state_of_internship || '',\n          LGA_of_internship: userInfo.LGA_of_internship || '',\n        };\n      \n      default:\n        return userInfo || {};\n    }\n  };\n  \n  const updateFormData = (formData) => {\n    updateUserInfo(formData);\n  };\n  \n  return {\n    formData: getFormData(),\n    updateFormData,\n    isUpdating,\n  };\n};"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 175, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/ideas_bank/src/app/page.js"],"sourcesContent":["\"use client\";\nimport { motion } from 'framer-motion';\nimport Link from 'next/link';\nimport { useEffect } from 'react';\nimport { useUserInfo } from '@/hooks/useUserInfo';\n\nexport default function WelcomePage() {\n  const { clearUserInfo } = useUserInfo();\n\n  useEffect(() => {\n    // Clear all user data and traineeId from localStorage when landing on home page\n    clearUserInfo();\n    \n    // Also directly clear localStorage items to ensure complete reset\n    if (typeof window !== 'undefined') {\n      localStorage.removeItem('data');\n      localStorage.removeItem('traineeId');\n    }\n  }, []);\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-purple-200 via-pink-100 to-blue-200 flex items-center justify-center p-6 font-inter\">\n      <motion.div\n        initial={{ opacity: 0, y: -30 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ duration: 0.8 }}\n        className=\"backdrop-blur-lg bg-white/30 border border-white/40 shadow-xl rounded-3xl p-10 max-w-md w-full text-center\"\n      >\n        <div className=\"w-32 h-32 mx-auto mb-6 overflow-hidden rounded-full shadow-lg border-4 border-white/30\">\n          <img src=\"/ideas-logo.jpg\" alt=\"Logo\" className=\"object-cover w-full h-full\" />\n        </div>\n\n        <h1 className=\"text-4xl font-semibold text-gray-800 mb-4 drop-shadow-sm\">\n          Welcome, Trainee!\n        </h1>\n\n        <p className=\"text-lg text-gray-700 mb-8\">\n          Weâ€™re excited to have you back. Please complete your bank information registration.\n        </p>\n\n        <Link href=\"/login\">\n          <motion.button\n            whileHover={{ scale: 1.05 }}\n            whileTap={{ scale: 0.95 }}\n            className=\"px-8 py-3 rounded-xl bg-gradient-to-r from-blue-300 to-indigo-300 text-white font-medium shadow-md hover:from-blue-700 hover:to-indigo-700 transition-all\"\n          >\n            Click to Continue\n          </motion.button>\n        </Link>\n      </motion.div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AACA;AAJA;;;;;;AAMe,SAAS;IACtB,MAAM,EAAE,aAAa,EAAE,GAAG,CAAA,GAAA,2HAAA,CAAA,cAAW,AAAD;IAEpC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,gFAAgF;QAChF;QAEA,kEAAkE;QAClE;;IAIF,GAAG,EAAE;IAEL,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC,0LAAA,CAAA,SAAM,CAAC,GAAG;YACT,SAAS;gBAAE,SAAS;gBAAG,GAAG,CAAC;YAAG;YAC9B,SAAS;gBAAE,SAAS;gBAAG,GAAG;YAAE;YAC5B,YAAY;gBAAE,UAAU;YAAI;YAC5B,WAAU;;8BAEV,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAI,KAAI;wBAAkB,KAAI;wBAAO,WAAU;;;;;;;;;;;8BAGlD,8OAAC;oBAAG,WAAU;8BAA2D;;;;;;8BAIzE,8OAAC;oBAAE,WAAU;8BAA6B;;;;;;8BAI1C,8OAAC,4JAAA,CAAA,UAAI;oBAAC,MAAK;8BACT,cAAA,8OAAC,0LAAA,CAAA,SAAM,CAAC,MAAM;wBACZ,YAAY;4BAAE,OAAO;wBAAK;wBAC1B,UAAU;4BAAE,OAAO;wBAAK;wBACxB,WAAU;kCACX;;;;;;;;;;;;;;;;;;;;;;AAOX","debugId":null}}]
}